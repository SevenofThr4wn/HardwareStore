@using System.Security.Claims
@{
    ViewData["Title"] = "Log Out";
    Layout = "_Layout";
}

<div class="min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-100 via-white to-gray-100 pt-20">
    <div class="max-w-md w-full p-6">
        <div class="bg-white border border-gray-200 rounded-2xl shadow-lg p-12 text-center transform transition-all hover:-translate-y-1 hover:shadow-2xl">

            <!-- Icon -->
            <i class="bi bi-box-arrow-right text-6xl text-blue-600 mb-6 animate-pulse"></i>

            <!-- Title -->
            <h1 class="text-3xl font-semibold text-gray-900 mb-4">Sign Out</h1>

            <!-- User Info -->
            @if (User.Identity?.IsAuthenticated == true)
            {
                <div class="bg-gray-100 rounded-lg p-4 mb-6 border-l-4 border-blue-600 text-left">
                    <div class="font-semibold text-gray-900 mb-1 flex items-center gap-2">
                        <i class="bi bi-person-circle"></i>@User.Identity.Name
                    </div>
                    <div class="text-gray-500 text-sm">
                        @User.FindFirstValue(ClaimTypes.Email) ?? User.FindFirstValue("email") ?? "No email available"
                    </div>
                </div>
            }

            <!-- Message -->
            <p class="text-gray-500 text-lg mb-8 leading-relaxed">
                Are you sure you want to sign out?<br>
                You'll need to sign in again to access your account.
            </p>

            <!-- Action Buttons -->
            <div class="flex flex-wrap justify-center gap-4">
                <!-- Cancel Button -->
                <a href="/" class="bg-gray-500 text-white rounded-xl font-semibold px-6 py-3 min-w-[140px] hover:bg-gray-600 hover:shadow-lg transition-all flex items-center justify-center gap-2">
                    <i class="bi bi-x-circle"></i> Cancel
                </a>

                <!-- Logout Form -->
                <form asp-controller="Account" asp-action="Logout" method="post" class="inline">
                    @Html.AntiForgeryToken()
                    <button type="submit" class="bg-red-500 text-white rounded-xl font-semibold px-6 py-3 min-w-[140px] hover:bg-red-600 hover:shadow-lg transition-all flex items-center justify-center gap-2">
                        <i class="bi bi-box-arrow-right"></i> Sign Out
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Prevent form resubmission on page refresh
        if (window.history.replaceState) {
            window.history.replaceState(null, null, window.location.href);
        }
    </script>
}
